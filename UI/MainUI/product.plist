{
  requires = ( MAIN, CommonUI );

  publicResources = (
  );

  factories = {
  };
  
  classes = {
    SOGoRootPage = {
      superclass  = "SoComponent";
      protectedBy = "<public>";
      defaultRoles = {
        "View" = ( "Authenticated" );
      };
    };
    SOGoObject = {
      protectedBy = "<public>";
      defaultAccess = "allow";
      defaultRoles = {
	"View" = ( "Owner", "ObjectViewer" );
	"Change Images And Files"  = ( "Owner", "ObjectEditor", "PROPPATCHer" );
	"Access Object" = ( "Owner", "AuthorizedSubscriber" );
	"Access Contents Information" = ( "Owner", "ObjectViewer" );
        "Add Documents, Images, and Files" = ( "Owner", "ObjectCreator" );
	"Add Folders" = ( "Owner", "FolderCreator" );
        "ReadAcls" = ( "Owner" );
        "Change Permissions" = ( "Owner" );
        "Delete Objects" = ( "Owner", "ObjectEraser" );
        "WebDAV Access" = ( "Owner", "ObjectViewer", "ObjectEditor", "ObjectCreator", "ObjectEraser" );
      };
    };
    SOGoContentObject = {
      superclass = "SOGoObject";
      defaultAccess = "allow";
     /* defaultAccess = "Access Contents Information"; */
      protectedBy = "Access Object";
      defaultRoles = {
      	"Access Contents Information" = ( "Owner", "ObjectViewer", "ObjectEditor" );
	"Change Images And Files" = ( "Owner", "ObjectEditor" );
      };
      methods = {
        DELETE = { 
          protectedBy = "Delete Objects";
        };
	GET = {
          protectedBy = "Access Contents Information";
	};
	PUT = {
	  protectedBy = "Change Images And Files";
	};
      };
    };
    SOGoFolder = {
      superclass = "SOGoObject";
      protectedBy = "Access Object";
      defaultRoles = {
	"Change Images And Files"  = ( "Owner", "ObjectEditor", "PROPPATCHer" );
	"View" = ( "Owner", "ObjectViewer", "ObjectEditor" );
	"Access Contents Information" = ( "Owner", "ObjectViewer", "ObjectEditor" );
	"WebDAV Access" = ( "Authenticated", "AuthorizedSubscriber" );
      };
    };
    SOGoParentFolder = {
      superclass = "SOGoFolder";
      protectedBy = "Access Contents Information";
      defaultRoles = {
	"Access Contents Information" = ( "Authenticated" );
        "WebDAV Access" = ( "Authenticated" );
	"Add Folders" = ( "Owner" );
	"Delete Objects" = ( "Owner" );
      };
    };
    SOGoUserFolder = {
      superclass = "SOGoFolder";
      protectedBy = "Access Contents Information";
      defaultRoles = {
	"Access Contents Information" = ( "Authenticated" );
        "WebDAV Access" = ( "Authenticated" );
	"View" = ( "Authenticated" );
      };
    };
    SOGoGCSFolder = {
      superclass = "SOGoFolder";
      defaultRoles = {
	"Delete Objects" = ( "Owner" );
      };
    };
  };

  categories = {
    SOGo = { // TODO: move decls to class
      slots = {
	toolbar = {
	  value = "none"; // keep this in order to avoid lookups on username
			  // "toolbar"
	};
      };
      methods = {
        view = { 
          protectedBy = "<public>";
          pageName = "SOGoRootPage"; 
        };
	index = { 
          protectedBy = "<public>";
          pageName = "SOGoRootPage"; 
        };
/*	crash = {
          protectedBy = "<public>";
          pageName = "SOGoRootPage";
	  actionName = "crash";
        };
	exception = {
          protectedBy = "<public>";
          pageName = "SOGoRootPage";
	  actionName = "exception";
        };
	raisedException = {
          protectedBy = "<public>";
          pageName = "SOGoRootPage";
	  actionName = "raisedException";
        }; */
	connect = {
          protectedBy = "<public>";
          pageName = "SOGoRootPage";
	  actionName = "connect";
        };
        GET = { // more or less a hack, see README of dbd
          protectedBy = "<public>";
          pageName = "SOGoRootPage"; 
        };
      };
    };
    SOGoRootPage = {
    };
    SOGoUserFolder = {
      methods = {
        view = { 
          protectedBy = "<public>";
          pageName = "SOGoUserHomePage"; 
        };
	logoff = {
          protectedBy = "<public>";
          pageName = "SOGoUserHomePage";
	  actionName = "logoff";
	};
	usersSearch = {
	  protectedBy = "View";
	  pageName = "SOGoUserHomePage";
	  actionName = "usersSearch";
	};
	foldersSearch = {
	  protectedBy = "View";
	  pageName = "SOGoUserHomePage";
	  actionName = "foldersSearch";
	};
      };
    };
//     SOGoGroupsFolder = {
//       methods = {
//         index = { 
//           protectedBy = "View";
//           pageName = "SOGoGroupsPage"; 
//         };
//       };
//     };
//     SOGoGroupFolder = {
//       methods = {
//         index = { 
//           protectedBy = "View";
//           pageName = "SOGoGroupPage"; 
//         };
//       };
//     };
    SOGoFreeBusyObject = {
      methods = {
        ajaxRead = { 
          protectedBy = "<public>";
          pageName = "SOGoUserHomePage"; 
          actionName = "readFreeBusy";
        };
      };
    };
//     SOGoCustomGroupFolder = {
//       methods = {
//       };
//     };
  };
}
